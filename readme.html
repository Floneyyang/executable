
<h1 id="label-Executable">Executable</h1>

<p><a href="http://rubyworks.github.com/executable">Website</a> | <a
href="http://github.com/rubyworks/executable">Source Code</a> | <a
href="http://github.com/rubyworks/executable/features">Report Issue</a> |
<a href="irc://irc.freenode.org/rubyworks">#rubyworks</a></p>

<p><a href="http://travis-ci.org/rubyworks/executable"><img
src="http://travis-ci.org/rubyworks/executable.png"/></a></p>

<h2 id="label-DESCRIPTION">DESCRIPTION</h2>

<p>Executable is to the commandline, what ActiveRecord is the database.  You
can think of Executable as a <strong>COM</strong>, a Command-line Object
Mapper, just as ActiveRecord is an ORM (Object Relational Mapper). Any
class mixing in Executable or subclassing Executable::Command can define a
complete command line tool using nothing more than Ruby’s standard syntax.
No special DSL is required.</p>

<h2 id="label-FEATURES">FEATURES</h2>
<ul><li>
<p>Easy to use, just mixin or subclass.</p>
</li><li>
<p>Define #call to control the command procedure.</p>
</li><li>
<p>Public writers become options.</p>
</li><li>
<p>Namespace children become subcommands.</p>
</li><li>
<p>Or easily dispatch subcommands to public methods.</p>
</li><li>
<p>Generate help in plain text or markdown.</p>
</li></ul>

<h2 id="label-LIMITATIONS">LIMITATIONS</h2>
<ul><li>
<p>Ruby 1.9+ only.</p>
</li><li>
<p>Help doesn’t handle aliases well (yet).</p>
</li></ul>

<h2 id="label-RELEASE+NOTES">RELEASE NOTES</h2>

<p>Please see HISTORY.rdoc file.</p>

<h2 id="label-SYNOPSIS">SYNOPSIS</h2>

<p>CLIs can be built by using a Executable as a mixin, or by subclassing 
`Executable::Command`. Methods seemlessly handle command-line options.
Writer methods (those ending in ‘=’) correspond to options and query
methods (those ending in ‘?’) modify them to be boolean switches.</p>

<p>For example, here is a simple “Hello, World!” commandline tool.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'executable'</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">HelloCommand</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">Executable</span>

  <span class="ruby-comment"># Say it in uppercase?</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">load=</span>(<span class="ruby-identifier">bool</span>)
    <span class="ruby-ivar">@loud</span> = <span class="ruby-identifier">bool</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">loud?</span>
    <span class="ruby-ivar">@loud</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Show this message.</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">help?</span>
    <span class="ruby-identifier">cli</span>.<span class="ruby-identifier">show_help</span>
    <span class="ruby-identifier">exit</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">alias</span> :<span class="ruby-identifier">h?</span> <span class="ruby-operator">:</span><span class="ruby-identifier">help?</span>

  <span class="ruby-comment"># Say hello.</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span> <span class="ruby-operator">||</span> <span class="ruby-string">'World'</span>
    <span class="ruby-identifier">str</span>  = <span class="ruby-node">&quot;Hello, #{name}!&quot;</span>
    <span class="ruby-identifier">str</span>  = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">loud?</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-identifier">str</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>To make the command available on the command line, add an executable to
your project passing ARGV to the #execute or #run methods.</p>

<pre class="ruby"><span class="ruby-comment">#!usr/bin/env ruby</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'hello.rb'</span>
<span class="ruby-constant">HelloCommand</span>.<span class="ruby-identifier">run</span>
</pre>

<p>If we named this file `hello`, set its execute flag and made it available
on our systems $PATH, then:</p>

<pre>$ hello
Hello, World!

$ hello John
Hello, John!

$ hello --loud John
HELLO, JOHN!</pre>

<p>Executable can also generate help text for commands.</p>

<pre>$ hello --help
USAGE: hello [options]

Say hello.

--loud      Say it in uppercase?
--help      Show this message</pre>

<p>If you look back at the class definition you can see it’s pulling comments
from the source to provide descriptions. It pulls the  description the
command itself from the `#call` method.</p>

<p>Basic help like this is fine for personal tools, but for public facing
production applications it is desirable to utilize manpages. To this end,
Executable provides Markdown formatted help as well. We can access this,
for example, via `HelloCommand.help.markdown`. The idea with this is that
we can save the output to `man/hello.ronn` or copy it the top of our `bin/`
file, edit it to perfection and then use tools such a <a
href="https://github.com/rtomayko/ronn">ronn</a>, <a
href="https://github.com/sunaku/binman">binman</a> or <a
href="https://github.com/sunaku/md2man">md2man</a> to generate the
manpages. What’s particularly cool about Executable, is that once we have a
manpage in the standard `man/` location in our project, the `#show_help`
method will use it instead of the plain text.</p>

<p>For a more detail example see <a href="http://demo.html">QED</a> and <a
href="http://rubydoc.info/gems/executable/frames">API</a> documentation.</p>

<h2 id="label-INSTALLATION">INSTALLATION</h2>

<p>Install with RubyGems in the usual fashion.</p>

<pre>$ gem install executable</pre>

<h2 id="label-LEGAL">LEGAL</h2>

<p>Copyright © 2008 Rubyworks</p>

<p>Distributable in accordance with the <strong>BSD-2-Clause</strong> license.</p>

<p>See COPYING.rdoc for licensing details.</p>
